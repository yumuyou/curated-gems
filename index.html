<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>æ²æ²çš„ç²¾é€‰å†…å®¹</title>
    <link rel="stylesheet" href="./styles.css" />
</head>

<body>
    <header class="container">
        <div class="header-main">
            <div class="logo-area">
                <h1 data-zh="æ²æ²çš„è„‘æ´å†°ç®±ğŸ§Š" data-en="Curated Content Hub">æ²æ²çš„è„‘æ´å†°ç®±ğŸ§Š</h1>
                <p class="subtitle" data-zh="å‘ç°ä¼˜è´¨æ–‡ç« ã€æ’­å®¢å’Œèµ„æº" data-en="Discover quality articles, podcasts and resources">å‘ç°ä¼˜è´¨æ–‡ç« ã€æ’­å®¢å’Œèµ„æº</p>
            </div>
            <div class="header-controls">
                <div class="control-item">
                    <button id="lang-toggle" class="control-button lang-toggle" title="åˆ‡æ¢è¯­è¨€ / Switch Language">
                        <span class="current-lang" data-zh="ä¸­" data-en="EN">ä¸­</span>
                    </button>
                </div>
                <div class="control-item version-selector">
                    <div class="version-tabs">
                        <button class="version-tab" data-version="1" data-zh="åŸºç¡€ç‰ˆ" data-en="Basic">åŸºç¡€ç‰ˆ</button>
                        <button class="version-tab" data-version="2" data-zh="æœç´¢ç‰ˆ" data-en="Search">æœç´¢ç‰ˆ</button>
                        <button class="version-tab" data-version="3" data-zh="ç­›é€‰ç‰ˆ" data-en="Filter">ç­›é€‰ç‰ˆ</button>
                        <button class="version-tab" data-version="4" data-zh="åŠ¨æ€ç‰ˆ" data-en="Dynamic">åŠ¨æ€ç‰ˆ</button>
                    </div>
                    <small id="hint" class="version-hint"></small>
                </div>
            </div>
        </div>
    </header>
    <main class="container">
        <div id="controls"></div>
        <div id="list" class="grid"></div>
        <p id="empty" class="hidden" data-zh="åŠ è½½ä¸­â€¦" data-en="Loading...">åŠ è½½ä¸­â€¦</p>
    </main>
    <script>
        // Language management
        let currentLang = 'zh';
        
        function updateLanguage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en';
            
            // Update all elements with data-zh and data-en attributes
            document.querySelectorAll('[data-zh][data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${lang}`);
            });
            
            // Update option texts
            document.querySelectorAll('option[data-zh][data-en]').forEach(option => {
                option.textContent = option.getAttribute(`data-${lang}`);
            });
            
            // Update hint text
            const currentVer = new URLSearchParams(location.search).get("v") || "1";
            const hintTexts = {
                zh: `å½“å‰ï¼šv${currentVer}ï¼ˆåœ°å€å¯åŠ  ?v=1/2/3/4 åˆ‡æ¢ï¼‰`,
                en: `Current: v${currentVer} (Add ?v=1/2/3/4 to URL to switch)`
            };
            document.getElementById("hint").textContent = hintTexts[lang];
            
            // Trigger re-render if data is already loaded
            if (window.currentData) {
                window.renderWithLanguage(window.currentData, lang);
            }
        }
        
        // Initialize parameters
        const params = new URLSearchParams(location.search);
        const ver = params.get("v") || "1";
        const lang = params.get("lang") || "zh";
        
        // ä¸å†éœ€è¦è®¾ç½®selectçš„å€¼ï¼Œå› ä¸ºå·²ç»æ”¹ä¸ºæŒ‰é’®
        // document.getElementById("ver").value = ver;
        
        // Update language on load
        updateLanguage(lang);
        
        // Version change handler - ä¸å†éœ€è¦ï¼Œå› ä¸ºå·²ç»æ”¹ä¸ºæŒ‰é’®
        // document.getElementById("ver").addEventListener("change", (e) => {
        //     const u = new URL(location.href);
        //     u.searchParams.set("v", e.target.value);
        //     u.searchParams.set("lang", currentLang);
        //     location.href = u.toString();
        // });
        
        // Language change handler
        document.getElementById("lang-toggle").addEventListener("click", () => {
            const newLang = currentLang === 'zh' ? 'en' : 'zh';
            const u = new URL(location.href);
            u.searchParams.set("lang", newLang);
            location.href = u.toString();
        });
        
        // ç‰ˆæœ¬é€‰é¡¹å¡å¤„ç†
        const versionTabs = document.querySelectorAll('.version-tab');
        const currentVersion = ver;
        
        // è®¾ç½®å½“å‰ç‰ˆæœ¬ä¸ºæ¿€æ´»çŠ¶æ€
        versionTabs.forEach(tab => {
            if(tab.dataset.version === currentVersion) {
                tab.classList.add('active');
            }
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            tab.addEventListener('click', () => {
                const version = tab.dataset.version;
                const u = new URL(location.href);
                u.searchParams.set("v", version);
                u.searchParams.set("lang", currentLang);
                location.href = u.toString();
            });
        });
        
        // Load version-specific script
        const s = document.createElement("script");
        s.src = `./v${ver}/app.js`;
        s.defer = true;
        document.body.appendChild(s);
    </script>
</body>

</html>